<template>
  <page-container :title="false">
    <div>
      <a-row :gutter="24">
        <a-card title="工作台">
          <a-col :md="2">
            <a-button type="primary" size="large">智慧环保</a-button>
          </a-col>
          <a-col :md="2">
            <a-button type="primary" size="large" @click="toEmergency">应急管理</a-button>
          </a-col>
          <a-col :md="2">
            <a-button type="primary" size="large" @click="toSecurity">智慧安监</a-button>
          </a-col>
        </a-card>
      </a-row>
      <a-row style="width: 50%">
        <a-card title="业务管理" :bordered="false">
          <a-card-grid style="width:15%;text-align:center" :bordered="false">
            <a-card-meta>
              <a-avatar
                slot="avatar"
                icon="file-text"
                :size="70"
                style="background-color:#5394f0"
              />
            </a-card-meta>
            <a href="http://172.17.10.168:8081/" style="padding-top: 13px;font-size: larger;font-weight: bolder">安全中心</a>
          </a-card-grid>
        </a-card>
      </a-row>
      <a-row>
        <template>
          <a-button @click="getMenu">获取菜单</a-button>
          <a-badge status="success"/>
          <p>{{ text }}</p>
        </template>
      </a-row>
    </div>
  </page-container>
</template>

<script>
import { mapActions } from 'vuex'
// import { getmenu } from '@/api/login'
import { dynamicRouter } from '@/router/generator-routers'
import { getStore } from '@/utils/store'

export default {
  name: 'Index',
  data () {
    return {
      text: []
    }
  },
  created () {
  },
  methods: {
    ...mapActions(['setMenu', 'setTitle']),
    toEnvironment () {
      this.$message.success('进入智慧环保')
      this.$router.push({ name: 'environment' })
    },
    toEmergency () {
      this.$message.success('进入应急管理')
      this.$router.push({ name: 'emergency' })
    },
    toSecurity () {
      this.$message.success('进入智慧安监')
      this.$router.push({ name: 'safety' })
    },
    ceshi () {
      this.$message.success('响应')
    },
    getMenu () {
      const menuId = getStore({ name: 'menuId' })
      dynamicRouter(menuId).then(res => {
        console.log(res)
        this.text = res
        console.log(this.text)
      })
    }
  }
}
</script>
