<template>
  <a-card style="min-height: 700px" :bordered="false">
    <div class="table-operator">
      <a-form layout="inline">
        <a-row type="flex" justify="space-between">
          <!-- <a-row :gutter="24"> -->
          <!-- <a-col>
            <a-row type="flex" justify="center"> -->
          <!-- <a-col :span="10">
              <a-form-item label="所属企业">
                <a-input placeholder="请填写"/>
              </a-form-item>
            </a-col> -->
          <a-col :span="3">
            <a-form-item label="转运联单类型">
              <a-select>
                <tag-select-option v-for="d in selectOptions" :key="d.value">
                  {{ d.text }}
                </tag-select-option>
              </a-select>
            </a-form-item>
          </a-col>

          <a-col :span="2">
            <a-button type="primary" style="margin-top: 3px">搜索</a-button>
          </a-col>
          <!-- </a-row>
          </a-col> -->
        </a-row>
      </a-form>
    </div>
    <s-table
      ref="personnelTable"
      size="default"
      :rowKey="record => record.id"
      :columns="columns"
      :data="loadData"
      :alert="false"
      :rowSelection="rowSelection"
      showPagination="auto"
    >
      <span slot="action" slot-scope="text, record">
        <template>
          <a @click="personnelCheck(record)">查看</a>
          <a-divider type="vertical"/>
          <a @click="personnelEdit(record)">编辑</a>
        </template>
      </span>
    </s-table>
  </a-card>
</template>

<script>
import TagSelectOption from '@/components/TagSelect/TagSelectOption'
import { STable } from '@/components'
import { personnelColumns } from '@/views/safety/table'
import { suppliesGet } from '@/api/resources'

const selectOptions = [
  {
    text: 'A级告警',
    value: 'A级告警'
  },
  {
    text: 'B级告警',
    value: 'B级告警'
  },
  {
    text: 'C级告警',
    value: 'C级告警'
  },
  {
    text: 'D级告警',
    value: 'D级告警'
  }
]
export default {
  name: 'Transport',
  components: {
    TagSelectOption,
    STable
  },
  data () {
    return {
      queryParam: {},
      loadData: parameter => {
        const requestParameters = { current: parameter.pageNo, size: parameter.pageSize }
        Object.assign(requestParameters, this.queryParam)
        console.log(requestParameters)
        return suppliesGet(requestParameters).then(res => {
          console.log(res)
          const data = {}
          data.totalCount = res.data.total
          data.totalPage = res.data.pages
          data.pageNo = res.data.current
          data.pageSize = res.data.size
          data.data = res.data.records
          console.log(data)
          return data
        })
      },
      selectedRowKeys: [],
      selectedRows: []
    }
  },
  computed: {
    selectOptions: () => selectOptions,
    columns: () => personnelColumns,
    hasSelected () {
      return this.selectedRowKeys.length > 0
    },
    rowSelection () {
      return {
        selectedRowKeys: this.selectedRowKeys,
        onChange: this.onSelectChange
      }
    }
  },
  methods: {
    onSelectChange (selectedRowKeys, selectedRows) {
      this.selectedRowKeys = selectedRowKeys
      this.selectedRows = selectedRows
    },
    // organizationAdd () {
    //   this.$message.success('添加组织')
    // },
    // organizationEdit () {
    //   this.$message.success('编辑组织')
    // },
    // organizationRemove () {
    //   this.$message.success('组织删除')
    // },
    personnelAdd () {
      // this.$message.success('新增')
    },
    personnelEdits () {
      // this.$message.success('编辑')
    },
    filesDownload () {
      this.$message.success('导出文件')
    },
    fileUpload () {
      this.$message.success('上传文件')
    },
    personnelCheck (record) {
      // this.$message.success('查看')
    },
    personnelEdit (record) {
      // this.$message.success('编辑')
    }
  }
}
</script>
<style lang="less">
.right-header {
  font-size: 16px;
  font-weight: 550;
}
.table-header {
  font-size: 20px;
  font-weight: 550;
  //line-height: 30px;
  //margin-bottom: 10px;
}
.ant-table-thead > tr > th {
  //color: #00A0E9;
  font-size: 16px;
  font-weight: bold;
  //align-items: center;
  //background-color: #e6f7ff;
}
</style>
