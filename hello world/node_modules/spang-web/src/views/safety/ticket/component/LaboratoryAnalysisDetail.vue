<template>
  <div>
    <a-card v-for="item in analysisHistory" :key="item.id">
      <a-descriptions :title="item.time" :column="1">
        <a-descriptions-item label="取样位置">
          {{ item.location }}
        </a-descriptions-item>
        <a-descriptions-item label="有害气体">
          测量值
        </a-descriptions-item>
        <template v-for="(gas, index) in item.gas">
          <a-descriptions-item :label="gas.name" :key="index">
            {{ gas.value }}
          </a-descriptions-item>
        </template>
        <a-descriptions-item label="分析人">
          {{ item.analysis }}
          <img :src="item.signature" v-if="item.signature" class="signature-img">
        </a-descriptions-item>
        <a-descriptions-item label="提交时间">
          {{ item.commitTime }}
        </a-descriptions-item>
      </a-descriptions>
    </a-card>

  </div>
</template>

<script>
import { getLaboratoryAnalysis } from '@/api/safety'

export default {
  name: 'LaboratoryAnalysisDetail',
  props: {
    taskNo: {
      type: String,
      required: true,
      default: ''
    }
  },
  data () {
    return {
      analysisHistory: []
    }
  },
  mounted () {
    getLaboratoryAnalysis({
      taskNo: this.taskNo
    }).then(({ data }) => {
      // TODO 测试数据
      data = [
        {
          id: '1',
          time: '2021-05-21 11:15',
          location: 'XX维修点',
          gas: [
            {
              name: '一氧化碳',
              value: '30ppm'
            }
          ],
          analysis: '马倩',
          commitTime: '2021-05-21 11:20'
        }
      ]
      // 测试数据结束
      this.analysisHistory = data
    })
  }
}
</script>

<style scoped lang="less">
  /deep/ .ant-descriptions-item {
    .ant-descriptions-item-label {
      width: 30%
    }

    .ant-descriptions-item-content {
      width: 70%;

      .signature-img {
        width: 100px;
        height: 30px;
      }
    }
  }

</style>
