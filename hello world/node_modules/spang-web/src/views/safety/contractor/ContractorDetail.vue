<template>
  <a-modal
    title="详细信息"
    :bodyStyle="{maxHeight:'700px',overflow:'auto',paddingTop: '5px'}"
    :width="700"
    :visible="visible"
    :closable="false"
    @cancel="() => { $emit('cancel') }"
    :keyboard="false"
    :maskClosable="false"
  >
    <template slot="footer">
      <a-button type="primary" @click="() => { $emit('cancel') }">返回</a-button>
    </template>
    <a-card style="margin-top: 8px">
      <a-descriptions :column="1" style="margin-left: 80px" :colon="true" v-if="mode === 'contractor'">
        <a-descriptions-item label="承包商名称">{{ info.name || '-' }}</a-descriptions-item>
        <a-descriptions-item label="承包商性质">{{ info.natureName || '-' }}</a-descriptions-item>
        <a-descriptions-item label="法人">{{ info.legalPerson || '-' }}</a-descriptions-item>
        <a-descriptions-item label="联系方式">{{ info.contactWay || '-' }}</a-descriptions-item>
        <a-descriptions-item label="地址">{{ info.address || '-' }}</a-descriptions-item>
        <a-descriptions-item label="是否在合作期内">{{ info.isCooperationPeriod === 0 ? '是': '否' || '-' }}</a-descriptions-item>
        <a-descriptions-item label="相关介绍">{{ info.description || '-' }}</a-descriptions-item>
        <a-descriptions-item label="营业执照">
          <template v-if="info.license && info.license.length > 0">
            <a-button
              type="link"
              size="small"
              @click="fileDownLoad(item.id, item.originalFileName)"
              :disabled="item.originalFileName===''"
              v-for="item in info.license"
              :key="item.id"
            >
              {{ item.originalFileName }}
            </a-button>
          </template>
          <template v-else>
            {{ '-' }}
          </template>
        </a-descriptions-item>
        <a-descriptions-item label="施工资质">
          <template v-if="info.qualification && info.qualification.length > 0">
            <a-button
              type="link"
              size="small"
              @click="fileDownLoad(item.id, item.originalFileName)"
              :disabled="item.originalFileName===''"
              v-for="item in info.qualification"
              :key="item.id"
            >
              {{ item.originalFileName }}
            </a-button>
          </template>
          <template v-else>
            {{ '-' }}
          </template>
        </a-descriptions-item>
      </a-descriptions>
      <a-descriptions :column="1" style="margin-left: 80px" :colon="true" v-if="mode === 'contractorPerson'">
        <a-descriptions-item label="所属承包商">{{ info.contractorName || '-' }}</a-descriptions-item>
        <a-descriptions-item label="姓名">{{ info.name || '-' }}</a-descriptions-item>
        <a-descriptions-item label="身份证">{{ info.idCard || '-' }}</a-descriptions-item>
        <a-descriptions-item label="联系方式">{{ info.contactWay || '-' }}</a-descriptions-item>
        <a-descriptions-item label="岗位角色">{{ info.post || '-' }}</a-descriptions-item>
        <a-descriptions-item label="备注">{{ info.remark || '-' }}</a-descriptions-item>
        <a-descriptions-item label="资质证书">
          <template v-if="info.qualification && info.qualification.length > 0">
            <a-button
              type="link"
              size="small"
              @click="fileDownLoad(item.id, item.originalFileName)"
              :disabled="item.originalFileName===''"
              v-for="item in info.qualification"
              :key="item.id"
            >
              {{ item.originalFileName }}
            </a-button>
          </template>
          <template v-else>
            {{ '-' }}
          </template>
        </a-descriptions-item>
      </a-descriptions>
      <a-descriptions :column="1" style="margin-left: 80px" :colon="true" v-if="mode === 'lawless'">
        <span>违规信息</span>
        <a-divider />
        <a-descriptions-item label="承包商名称">{{ info.contractorName || '-' }}</a-descriptions-item>
        <a-descriptions-item label="违规人">{{ info.illegalPersonName || '-' }}</a-descriptions-item>
        <a-descriptions-item label="违规日期">{{ info.illegalDate || '-' }}</a-descriptions-item>
        <a-descriptions-item label="违规类型">{{ info.typeName || '-' }}</a-descriptions-item>
        <a-descriptions-item label="违规描述">{{ info.description || '-' }}</a-descriptions-item>
        <a-descriptions-item label="现场照片">
          <template v-if="info.localePhotos && info.localePhotos.length > 0">
            <a-button
              type="link"
              size="small"
              @click="fileDownLoad(item.id, item.originalFileName)"
              :disabled="item.originalFileName===''"
              v-for="item in info.localePhotos"
              :key="item.id"
            >
              {{ item.originalFileName }}
            </a-button>
          </template>
          <template v-else>
            {{ '-' }}
          </template>
        </a-descriptions-item>
        <span>处理信息</span>
        <a-divider />
        <a-descriptions-item label="处理结果">{{ info.resultTypeName || '-' }} {{info.forfeit || '-'}}元</a-descriptions-item>
        <a-descriptions-item label="处理结果说明">{{ info.resultExplain || '-' }}</a-descriptions-item>
      </a-descriptions>
      <a-descriptions :column="1" style="margin-left: 80px" :colon="true" v-if="mode === 'alteration'">
        <a-descriptions-item label="变更名称">{{ info.name || '-' }}</a-descriptions-item>
        <a-descriptions-item label="变更内容">{{ info.content || '-' }}</a-descriptions-item>
        <a-descriptions-item label="变更原因和目的">{{ info.reason || '-' }}</a-descriptions-item>
        <a-descriptions-item label="变更单位">{{ info.changeUnitName || '-' }}</a-descriptions-item>
        <a-descriptions-item label="变更区域">{{ info.areaName || '-' }}</a-descriptions-item>
        <a-descriptions-item label="变更级别">{{ info.levelName || '暂无' }}</a-descriptions-item>
        <a-descriptions-item label="变更类型">{{ info.typeName || '暂无' }}</a-descriptions-item>
        <a-descriptions-item label="变更文件">
          <a-button type="link" size="small" @click="fileDownLoad(info.docUrl)" :disabled="info.fileName===''">{{ info.fileName || info.docUrl }}</a-button>
        </a-descriptions-item>
        <a-descriptions-item label="创建时间">{{ info.createTime || '-' }}</a-descriptions-item>
        <a-descriptions-item label="起始时间">{{ info.startTime || '-' }}</a-descriptions-item>
        <a-descriptions-item label="截止时间">{{ info.endTime || '-' }}</a-descriptions-item>
      </a-descriptions>
      <a-descriptions :column="1" style="margin-left: 80px" :colon="true" v-if="mode === 'accident'">
        <a-descriptions-item label="事故名称">{{ info.name || '-' }}</a-descriptions-item>
        <a-descriptions-item label="事故描述">{{ info.description || '-' }}</a-descriptions-item>
        <a-descriptions-item label="事故区域">{{ info.areaName || '-' }}</a-descriptions-item>
        <a-descriptions-item label="发生地点">{{ info.detailLocation || '-' }}</a-descriptions-item>
        <a-descriptions-item label="事故责任单位">{{ info.chargerUnitName || '-' }}</a-descriptions-item>
        <a-descriptions-item label="事故类别">{{ info.typeName || '暂无' }}</a-descriptions-item>
        <a-descriptions-item label="事故文件">
          <a-button type="link" size="small" @click="fileDownLoad(info.docUrl)" :disabled="info.reportName===''">{{ info.reportName || info.docUrl }}</a-button>
        </a-descriptions-item>
        <a-descriptions-item label="创建人">{{ info.userName || '-' }}</a-descriptions-item>
        <a-descriptions-item label="发生时间">{{ info.occurTime || '-' }}</a-descriptions-item>
        <a-descriptions-item label="创建时间">{{ info.createTime || '-' }}</a-descriptions-item>
      </a-descriptions>
    </a-card>
  </a-modal>
</template>

<script>
import { downloadFile } from '@/api/common'

export default {
  name: 'ContractorDetail',
  props: {
    visible: {
      type: Boolean,
      required: true
    },
    info: {
      type: Object,
      default: {}
    },
    mode: {
      type: String,
      default: ''
    }
  },
  methods: {
    fileDownLoad (id, name) {
      downloadFile(id, name)
    }
  }
}
</script>
<style lang="less" scoped>
/deep/ .ant-modal-title {
  font-size: 18px;
}
/deep/ .ant-card-head-title {
  font-weight: bolder;
}
/deep/ .ant-descriptions-item-label {
  width: 150px;
  font-size: 15px;
  //font-weight: bolder;
  text-align: right;
}
/deep/ .ant-descriptions-item-content {
  font-size: 15px;
  font-weight: bolder;
}
</style>
