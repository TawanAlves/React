<template>
  <a-card style="margin: 15px;">
    <a-list>
      <a-list-item>
        <div class="list-content">
          <div class="list-content-item">
            <span>工艺安全措施</span>
            <p>安全措施:{{ loadTechnologyList.content || ' ' }}</p>
          </div>
          <div class="list-content-item" style='padding-top: 23px'>
            <p>{{ loadTechnologyList.signUsers[0].signDate || ' ' }}</p>
          </div>
          <div class="list-content-item" style="text-align: center;padding-top: 25px">
            <sign-img :src="BASE_URL + '/spang-safety/file' + loadTechnologyList.signUsers[0].signatureURL"></sign-img>
          </div>
          <div class="list-content-item" style="text-align: right" v-if="false">
            <a>查看图片</a>
          </div>
        </div>
      </a-list-item>
      <a-list-item>
        <div class="list-content">
          <div class="list-content-item">
            <span>检修安全措施</span>
            <p>安全措施:{{ loadReconditionList.content || ' ' }}</p>
          </div>
          <div class="list-content-item" style='padding-top: 23px'>
            <p>{{ loadReconditionList.signUsers[0].signDate || ' ' }}</p>
          </div>
          <div class="list-content-item" style="text-align: center;padding-top: 25px">
            <sign-img :src="BASE_URL + '/spang-safety/file' + loadReconditionList.signUsers[0].signatureURL"></sign-img>
          </div>
          <div class="list-content-item" style="text-align: right" v-if="false">
            <a>查看图片</a>
          </div>
        </div>
      </a-list-item>
    </a-list>
  </a-card>
</template>

<script>
import { mapGetters } from 'vuex'
import SignImg from '../component/SignImg'

export default {
  name: 'Confirmation',
  components: { SignImg },
  props: {
    ticketId: {
      type: String,
      default: '',
      required: true
    }
  },
  data () {
    return {
      loadTechnologyList:[],
      loadReconditionList:[],
    }
  },
  computed: {
    ...mapGetters(['userInfo'])
  },
  methods: {
    loadTechnologyDatas(){
      const params = {
        id: this.ticketId,
        type: 0
      }
      this.getList('/spang-safety/locale-confirm', params).then(res=>{
        this.loadTechnologyList = res.data;
      })
    },
    loadReconditionDatas(){
      const params = {
        id: this.ticketId,
        type: 4
      }
      this.getList('/spang-safety/locale-confirm', params).then(res=>{
        this.loadReconditionList = res.data;
      })
    },
  },
  created () {
    this.loadTechnologyDatas();
    this.loadReconditionDatas();
  }
}
</script>

<style scoped lang="less">
  .list-content-item {
    display: inline-block;
    vertical-align: middle;
    font-size: 14px;

    span {
      font-size: 14px;
      font-weight: 600;
      line-height: 20px;
    }

    p {
      margin-top: 4px;
      margin-bottom: 0;
      line-height: 22px;
    }

  }
  .ant-list-item {
    width: 100%;
    .list-content {
      width: 100%;
      display: flex;
      justify-content: space-between;
      .list-content-item {
        width: 25%;
      }
    }
  }

</style>
