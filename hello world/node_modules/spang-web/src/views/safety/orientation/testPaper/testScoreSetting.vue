<template>
  <a-form-model ref="ruleForm" :model="form" :rules="rules" :label-col="labelCol" :wrapper-col="wrapperCol">
    <a-row :gutter="24">
      <a-col :span="8">
        <a-form-model-item label="单选题每题分值" prop="singleChoiceScore">
          <a-input-number
            id="singleChoiceScore"
            v-model="form.singleChoiceScore"
            :min="0"
            :max="10000"
            :precision="0"
            :step="1"
          />
        </a-form-model-item>
      </a-col>
      <a-col :span="8">
        <a-form-model-item label="多选题每题分值" prop="multipleChoiceScore">
          <a-input-number
            id="multipleChoiceScore"
            v-model="form.multipleChoiceScore"
            :min="0"
            :max="10000"
            :precision="0"
            :step="1"
          />
        </a-form-model-item>
      </a-col>
      <a-col :span="8">
        <a-form-model-item label="判断题每题分值" prop="judgeNumberScore">
          <a-input-number
            id="judgeNumberScore"
            v-model="form.judgeNumberScore"
            :min="0"
            :max="10000"
            :precision="0"
            :step="1"
          />
        </a-form-model-item>
      </a-col>
    </a-row>
  </a-form-model>
</template>

<script>
export default {
  props: {
    defaultSetForm: {
      type: Object, // 默认表单数据
      default: () => null,
    },
    isEdit: {
      type: Boolean,
      required: false,
    },
  },
  data() {
    return {
      form: {
        singleChoiceScore: '', // 单选题每题分值
        multipleChoiceScore: '', // 多选题每题分值
        judgeNumberScore: '', // 判断题每题分值
      },
      rules: {
        singleChoiceScore: [{ required: true, message: '请输入单选题每题分值', trigger: 'blur' }],
        multipleChoiceScore: [{ required: true, message: '请输入多选题每题分值', trigger: 'blur' }],
        judgeNumberScore: [{ required: true, message: '请输入判断题每题分值', trigger: 'blur' }],
      },
    }
  },
  computed: {},
  watch: {
    defaultSetForm: {
      //监听的对象
      deep: true, //深度监听设置为 true
      handler: function (newV, oldV) {
        this.setFormData(newV)
      },
    },
  },
  mounted() {
    this.setFormData(this.defaultSetForm)
  },
  methods: {
    setFormData(newFormData) {
      if (this.isEdit) {
        this.form = JSON.parse(JSON.stringify(newFormData))
      } else {
        this.resetForm()
      }
    },
    submitForm() {
      let flag = false
      this.$refs.ruleForm.validate((valid) => {
        if (valid) {
          flag = true
        } else {
          flag = false
        }
      })
      return flag
    },
    resetForm() {
      this.$refs.ruleForm && this.$refs.ruleForm.resetFields()
      this.form = {
        singleChoiceScore: '', // 单选题每题分值
        multipleChoiceScore: '', // 多选题每题分值
        judgeNumberScore: '', // 判断题每题分值
        passScore: '', // 及格分值
      }
    },
  },
  beforeDestroy() {
    this.resetForm()
  },
}
</script>