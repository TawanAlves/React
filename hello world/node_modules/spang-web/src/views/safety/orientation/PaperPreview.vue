<template>
  <div>
    <div v-for="(questionType, index) in questions" :key="index">
      <template v-if="questionType.list && questionType.list.length > 0">
        <div><span class="question-type">{{ questionType.typeName }}</span><span>每题{{ questionType.score }}分</span></div>
        <div v-for="(item, index) in questionType.list" :key="item.id" class="question-box">
          <div class="question-index">
            <span>{{ index+1 }}.</span>
          </div>
          <div class="question-content">
            <div class="question-title" v-html="item.questionContent"></div>
            <!-- 单选题 -->
            <template v-if="questionType.type === 'radio' || questionType.type == 'judge'">
              <a-radio-group v-model="item.userAnswer" :disabled="disabled">
                <a-radio v-for="(option, index) in item.answerList" :key="option.id" :value="option.id" class="option-item">
                  <span v-show="questionType.type === 'radio'"> {{ optionPrefix[index] }}: </span><span v-html="option.content"></span>
                </a-radio>
              </a-radio-group>
            </template>
            <!-- 多选题 -->
            <template v-else-if="questionType.type == 'checkbox'">
              <a-checkbox-group v-model="item.userAnswer" :disabled="disabled">
                <a-checkbox
                  v-for="(option, index) in item.answerList"
                  :key="option.id"
                  :value="option.id"
                  class="option-item">
                  {{ optionPrefix[index] }}: <span v-html="option.content"></span>
                </a-checkbox>
              </a-checkbox-group>
            </template>
            <div class="question-answer" v-if="showAnswer">
              <a-space style="line-height: 32px;">
                <a-icon type="check" v-if="item.isRight" style="color: darkgreen"/>
                <a-icon type="close" v-else style="color: red"/>
                正确答案:<span>{{ item.rightAnswer }}</span>
                你的答案:<span :class="{'text-red': !item.isRight}">{{ item.userAnswerContent }}</span>
              </a-space>
              <div style="line-height: 32px;">
                <span>答案解析:</span>
                <span>{{ item.analysis }}</span>
              </div>
            </div>
          </div>
        </div>
      </template>
    </div>

  </div>

</template>

<script>
  export default {
    name: 'PaperPreview',
    props: {
      showAnswer: {
        type: Boolean,
        default: false
      },
      disabled: {
        type: Boolean,
        default: false
      },
      radioQuestions: {
        type: Array,
        default: () => []
      },
      checkboxQuestions: {
        type: Array,
        default: () => []
      },
      judgeQuestions: {
        type: Array,
        default: () => []
      },
      raidoScore: {
        type: Number,
        default: 0
      },
      checkboxScore: {
        type: Number,
        default: 0
      },
      judgeScore: {
        type: Number,
        default: 0
      }

    },
    data () {
      return {
        optionPrefix: [
          'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'
        ]
      }
    },
    computed: {
      questions () {
        console.log(this.raidoScore)
        return [{
          type: 'radio',
          list: this.radioQuestions,
          score: this.raidoScore,
          typeName: '单选题'
        }, {
          type: 'checkbox',
          list: this.checkboxQuestions,
          score: this.checkboxScore,
          typeName: '多选题'
        }, {
          type: 'judge',
          list: this.judgeQuestions,
          score: this.judgeScore,
          typeName: '判断题'
        }]
      }
    },
    methods: {

    }
  }
</script>

<style scoped lang="less">
  .content-title {
    font-size: 15px;
    color: #333;
    font-weight: 600;
  }

  .question-box {
    display: flex;
    margin-left: 20px;

    .question-index {
      width: 40px;
      text-align: right;
      margin-right: 7px;
    }

    .question-content {
      flex: 1;
    }
  }

  /deep/ .question-title > p {
    margin: 0;
  }

  .question-type {
    font-size: 16px;
    font-weight: bolder;
    color: #333;
    margin-right: 10px;
  }

  .option-item {
    display: block;
    margin: 8px;
    white-space: normal !important;
  }

  /deep/ .option-item p {
    margin: 0;
  }
</style>
