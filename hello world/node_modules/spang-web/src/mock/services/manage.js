import Mock from 'mockjs2'
import { builder, getQueryParameters } from '../util'

const totalCount = 5701

const serverList = (options) => {
  const parameters = getQueryParameters(options)

  const result = []
  const pageNo = parseInt(parameters.pageNo)
  const pageSize = parseInt(parameters.pageSize)
  const totalPage = Math.ceil(totalCount / pageSize)
  const key = (pageNo - 1) * pageSize
  const next = (pageNo >= totalPage ? (totalCount % pageSize) : pageSize) + 1

  for (let i = 1; i < next; i++) {
    const tmpKey = key + i
    result.push({
      key: tmpKey,
      id: tmpKey,
      no: 'No ' + tmpKey,
      description: '这是一段描述',
      callNo: Mock.mock('@integer(1, 999)'),
      status: Mock.mock('@integer(0, 3)'),
      updatedAt: Mock.mock('@datetime'),
      editable: false
    })
  }

  return builder({
    pageSize: pageSize,
    pageNo: pageNo,
    totalCount: totalCount,
    totalPage: totalPage,
    data: result
  })
}

const projects = () => {
  return builder([
      {
        title: '智慧安监',
        url: '/safety',
        show: true,
        icon: 'thunderbolt',
        color: '#f7803e'
      },
      {
        title: '应急管理',
        url: '/emergency',
        show: true,
        icon: 'bell',
        color: '#fb0505'
      },
      {
        title: '智慧环保',
        url: '',
        show: false,
        icon: 'cloud'
      },
      {
        title: '设备管理',
        url: '',
        show: false,
        icon: 'tool'
      },
      {
        title: '生产运行管理',
        show: false,
        icon: 'experiment'
      },
      {
        title: '仓储物流管理',
        show: false,
        icon: 'bank'
      },
      {
        title: '设备管理',
        url: '',
        show: false,
        icon: 'database'
      },
      {
        title: '安全中心',
        url: '',
        icon: 'safety-certificate',
        color: '#7773e9',
        show: true
      }
    ]
  )
}

const activity = () => {
  return builder([
    {
      content: '【设备】10月份306车间主水泵检修计划待审批',
      time: '2020-08-23'
    },
    {
      content: '【设备】2021年度检修计划待审批',
      time: '2020-08-23'
    },
    {
      content: '【生产】精馏车间工艺指标变更申请',
      time: '2017-05-27'
    },
    {
      content: '【生产】306车间10月份生产计划待审批',
      time: '2020-08-23'
    },
    {
      content: '【设备】受限空间作业票证办理申请',
      time: '2020-08-23'
    },
    {
      content: '【设备】特种设备作业人员证件到期还有1个月',
      time: '2017-05-27'
    }
    // {
    //   content: '【生产】您有4个未查阅的生产报告',
    //   time: '2020-10-25 14:47:00'
    // }
  ])
}

const teams = () => {
  return builder([{
    id: 1,
    name: '科学搬砖组',
    avatar: 'https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png'
  },
    {
      id: 2,
      name: '程序员日常',
      avatar: 'https://gw.alipayobjects.com/zos/rmsportal/cnrhVkzwxjPwAaCfPbdc.png'
    },
    {
      id: 1,
      name: '设计天团',
      avatar: 'https://gw.alipayobjects.com/zos/rmsportal/gaOngJwsRYRaVAuXXcmB.png'
    },
    {
      id: 1,
      name: '中二少女团',
      avatar: 'https://gw.alipayobjects.com/zos/rmsportal/ubnKSIfAJTxIgXOKlciN.png'
    },
    {
      id: 1,
      name: '骗你学计算机',
      avatar: 'https://gw.alipayobjects.com/zos/rmsportal/WhxKECPNujWoWEFNdnJE.png'
    }
  ])
}

const radar = () => {
  return builder([{
    item: '引用',
    '个人': 70,
    '团队': 30,
    '部门': 40
  },
    {
      item: '口碑',
      '个人': 60,
      '团队': 70,
      '部门': 40
    },
    {
      item: '产量',
      '个人': 50,
      '团队': 60,
      '部门': 40
    },
    {
      item: '贡献',
      '个人': 40,
      '团队': 50,
      '部门': 40
    },
    {
      item: '热度',
      '个人': 60,
      '团队': 70,
      '部门': 40
    },
    {
      item: '引用',
      '个人': 70,
      '团队': 50,
      '部门': 40
    }
  ])
}

const info = () => {
  const data = [
    {
      text: '【设备】通用桥式起重机距离下次检测还有3个月',
      time: '2020-10-28'
    },
    {
      text: '【设备】特种设备作业人员证件到期还有1个月',
      time: '2020-10-27'
    },
    {
      text: '【设备】5月20号09:00-16:00，306车间设备检修',
      time: '2020-10-26'
    },
    {
      text: '【生产】您有4个未查阅的生产报告，请及时查阅',
      time: '2020-10-25'
    },
    {
      text: '【设备】通用桥式起重机距离下次检测还有3个月',
      time: '2020-10-23'
    },
    {
      text: '【生产】您有4个未查阅的生产报告，请及时查阅',
      time: '2020-10-25'
    },
    {
      text: '【设备】通用桥式起重机距离下次检测还有3个月',
      time: '2020-10-23'
    },
    {
      text: '【设备】通用桥式起重机距离下次检测还有3个月',
      time: '2020-10-23'
    },
    {
      text: '【设备】通用桥式起重机距离下次检测还有3个月',
      time: '2020-10-233'
    },
    {
      text: '【设备】通用桥式起重机距离下次检测还有3个月',
      time: '2020-10-23'
    }
  ]
  return builder(data)
}

const notice = () => {
  return builder([
    {
      content: '集团举办2020年安全宣传咨询活动',
      time: '2020-10-30'
    },
    {
      content: '环境检查（2020.10.23）',
      time: '2020-10-27'
    },
    {
      content: '沪胜党发【2020】39号文 关于成立信息科技部的通知',
      time: '2020-10-14'
    },
    {
      content: '沪胜技字[2020] 8号 2020年度优秀论文评选通知',
      time: '2020-09-29'
    },
    {
      content: '2020年8月设计科室浮动奖金发布明细',
      time: '2020-09-27'
    },
    {
      content: '沪胜司发【2020】20号关于2020年国庆节、中秋节放假的通知',
      time: '2020-09-22'
    }
  ])
}

Mock.mock(/\/service/, 'get', serverList)
Mock.mock(/\/list\/search\/projects/, 'get', projects)
Mock.mock(/\/workplace\/activity/, 'get', activity)
Mock.mock(/\/workplace\/teams/, 'get', teams)
Mock.mock(/\/workplace\/radar/, 'get', radar)
Mock.mock(/\/workplace\/info/, 'get', info)
Mock.mock(/\/workplace\/notice/, 'get', notice)
